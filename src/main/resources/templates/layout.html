<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev Utils - Proxy Manager</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#6366f1', // Indigo 500
              secondary: '#4f46e5', // Indigo 600
              dark: '#1e293b', // Slate 800
            }
          }
        }
      }
    </script>
</head>
<body class="bg-gray-100 font-sans h-screen flex overflow-hidden">

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-dark bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="text-white text-2xl font-bold flex flex-col items-center">
            <i class="fas fa-spinner fa-spin text-5xl mb-4"></i>
            <span>Loading...</span>
        </div>
    </div>

    <!-- Sidebar Fragment -->
    <nav th:replace="~{fragments/sidebar :: sidebar}"></nav>

    <!-- Main Content -->
    <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
        <div layout:fragment="content">
            <!-- Page Content Goes Here -->
        </div>
    </main>

    <script>
        function showLoading() {
            document.getElementById('loading-overlay').classList.remove('hidden');
        }
        function hideLoading() {
            document.getElementById('loading-overlay').classList.add('hidden');
        }

        // Integration with HTMX
        document.body.addEventListener('htmx:beforeRequest', showLoading);
        document.body.addEventListener('htmx:afterRequest', hideLoading);
        document.body.addEventListener('htmx:responseError', function(event) {
            hideLoading();
            alert('An error occurred: ' + event.detail.xhr.statusText);
        });
    </script>
</body>
</html>
